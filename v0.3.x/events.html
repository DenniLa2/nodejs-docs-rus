<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>events &mdash; Node.js &mdash; Документация</title>
  <link rel="stylesheet" href="assets/style.css" type="text/css" media="all" />
  <link rel="stylesheet" href="assets/sh.css" type="text/css" media="all" />
  <script type="text/javascript" src="assets/jquery.js"></script>
</head>
<body>
  <div id="container">
    <header>
      <h1>Node.js &mdash; Документация</h1>
      <div id="gtoc">
        <p><a href="index.html">Содержание</a> | <a href="all.html">Просмотреть на одной странице</a></p>
      </div>
      <hr />
    </header>
    <h2 id="c_">Cобытия</h2>

<p>Множество объектов в Node генерируют события: <code>net.Server</code> вызывает событие
при каждом поступающем запросе, <code>fs.readStream</code> вызывает событие при открытии файла.
Все объекты, генерирующие события, являются экземплярами <code>events.EventEmitter</code>.
Используйте <code>require('events')</code> чтобы получить доступ к модулю.</p>

<p>Обычно события представлены строками в стиле camelCase. Вот несколько примеров:
<code>'stream'</code>, <code>'data'</code>, <code>'messageBegin'</code>. Однако, это только пожелание и никаких
жёстких ограничений на имена событий не накладывается.</p>

<p>К объектам могут быть присоединены функции, которые будут выполняться
при генерации события. Эти функции называются <em>обработчиками</em> (<em>listeners</em>).</p>

<h3 id="events.EventEmitter">events.EventEmitter</h3>

<p>Класс <code>EventEmitter</code> находится в модуле <code>'events'</code>: <code>require(events').EventEmitter</code>.</p>

<p>Когда источник событий сталкивается с ошибкой, типичное поведение — сгенерировать
событие ошибки <code>'error'</code>. События ошибки особенные — если им не назначен
обработчик, то они выводят на экран стек вызовов (stack trace) и завершают программу.</p>

<p>Все источники событий генерируют событие <code>'newListener'</code>,
когда к ним добавляются новые обработчики.</p>

<h4 id="emitter.addListener">emitter.addListener(event, listener)</h4>

<h4 id="emitter.on">emitter.on(event, listener)</h4>

<p>Добавляет обработчик в конец массива обработчиков указанного события.</p>

<pre><code>server.on('connection', function (stream) {
    console.log('someone connected!');
});</code></pre>

<h4 id="emitter.once">emitter.once(event, listener)</h4>

<p>Добавляет <strong>однократный</strong> обработчик указанного события. Обработчик вызываетя
один раз при первом наступлении события, после чего удаляется.</p>

<pre><code>server.once('connection', function (stream) {
    console.log('Ah, we have our first user!');
});</code></pre>

<h4 id="emitter.removeListener">emitter.removeListener(event, listener)</h4>

<p>Удаляет обработчик из массива обработчиков указанного события.
<strong>Внимание:</strong> изменяет индексы в массиве обработчиков после указанного обработчика.</p>

<pre><code>var callback = function(stream) {
    console.log('someone connected!');
};
server.on('connection', callback);
// ...
server.removeListener('connection', callback);</code></pre>

<h4 id="emitter.removeAllListeners">emitter.removeAllListeners(event)</h4>

<p>Удаляет все обработчики из массива обработчиков для указанного события.</p>

<h4 id="emitter.listeners">emitter.listeners(event)</h4>

<p>Возвращает массив обработчиков для указанного события. Этот массив может быть
использован, например, для удаления обработчиков.</p>

<pre><code>server.on('connection', function (stream) {
    console.log('someone connected!');
});
console.log(util.inspect(server.listeners('connection')); // [ [Function] ]</code></pre>

<h4 id="emitter.emit">emitter.emit(event, [arg1], [arg2], [...])</h4>

<p>Выполнит все обработчики события по порядку с указанными аргументами.</p>

<h4 id="_newListener_">Событие: 'newListener'</h4>

<p><code>function (event, listener) { }</code></p>

<p>Это событие вызывается каждый раз при добавлении обработчика события.</p>
  </div>
  <script type="text/javascript" src="assets/sh_main.js"></script>
  <script type="text/javascript" src="assets/sh_javascript.min.js"></script>
  <script type="text/javascript" src="assets/core.js"></script>
</body>
</html>