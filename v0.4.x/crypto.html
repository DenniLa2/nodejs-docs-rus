<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>crypto - Node.js &mdash; Документация</title>
  <link rel="stylesheet" href="assets/style.css" type="text/css" media="all" />
  <link rel="stylesheet" href="assets/sh.css" type="text/css" media="all" />
</head>
<body>
  <a href="http://github.com/kurokikaze/nodejs-docs-rus">
    <img style="position: absolute; top: 0; right: 0; border: 0;" src="assets/forkme_right_gray.png" alt="Fork me on GitHub">
  </a>
  <div id="container">
    <header>
      <h1>Node.js &mdash; Документация</h1>
      <div id="gtoc">
        <p><a href="index.html">Содержание</a> | <a href="all.html">Просмотреть на одной странице</a></p>
      </div>
      <hr />
    </header>
    <div id="toc"><h2>Содержание</h2><ul><li><a href="#_u041C_u043E_u0434_u0443_u043B_u044C_u043A_u0440_u0438_u043F_u0442_u043E_u0433_u0440_u0430_u0444_u0438_u0438">Модуль криптографии</a><ul><li><a href="#crypto.createCredentials">crypto.createCredentials(details)</a></li><li><a href="#crypto.createHash">crypto.createHash(algorithm)</a></li><li><a href="#hash.update">hash.update(data)</a></li><li><a href="#hash.digest">hash.digest(encoding='binary')</a></li><li><a href="#crypto.createHmac">crypto.createHmac(algorithm, key)</a></li><li><a href="#hmac.update">hmac.update(data)</a></li><li><a href="#hmac.digest">hmac.digest(encoding='binary')</a></li><li><a href="#crypto.createCipher">crypto.createCipher(algorithm, password)</a></li><li><a href="#crypto.createCipheriv">crypto.createCipheriv(algorithm, key, iv)</a></li><li><a href="#cipher.update">cipher.update(data, input_encoding='binary', output_encoding='binary')</a></li><li><a href="#cipher.final">cipher.final(output_encoding='binary')</a></li><li><a href="#crypto.createDecipher">crypto.createDecipher(algorithm, password)</a></li><li><a href="#crypto.createDecipheriv">crypto.createDecipheriv(algorithm, key, iv)</a></li><li><a href="#decipher.update">decipher.update(data, input_encoding='binary', output_encoding='binary')</a></li><li><a href="#decipher.final">decipher.final(output_encoding='binary')</a></li><li><a href="#crypto.createSign">crypto.createSign(algorithm)</a></li><li><a href="#signer.update">signer.update(data)</a></li><li><a href="#signer.sign">signer.sign(private_key, output_format='binary')</a></li><li><a href="#crypto.createVerify">crypto.createVerify(algorithm)</a></li><li><a href="#verifier.update">verifier.update(data)</a></li><li><a href="#verifier.verify">verifier.verify(cert, signature, signature_format='binary')</a></li></ul></li></ul><hr /></div>
<h2 id="_u041C_u043E_u0434_u0443_u043B_u044C_u043A_u0440_u0438_u043F_u0442_u043E_u0433_u0440_u0430_u0444_u0438_u0438">Модуль криптографии</h2>

<p>Используйте <code>require('crypto')</code> чтобы получить доступ к функциям модуля.</p>

<p>Криптографический модуль требует для своей работы наличия OpenSSL.
Он предоставляет возможность использовать аутентификацию в HTTPS и HTTP-соединениях.</p>

<p>Модуль также предоставляет набор обёрток для некоторых методов OpenSSL:
hash, hmac, cipher, decipher, sign и verify.</p>

<h3 id="crypto.createCredentials">crypto.createCredentials(details)</h3>

<p>Создаёт объект данных аутентификации, может принимать параметром объект со следующими свойствами:</p>

<ul><li><code>key</code> : строка с PEM-закодированным приватным ключом,</li><li><code>cert</code> : строка с PEM-закодированным сертификатом,</li><li><code>ca</code> : строка или список строк PEM-закодированных доверенных корневых сертификатов.</li></ul>

<p>Если корневые сертификаты не указаны, node.js будет использовать список доверенных сертификатов,
расположенный по адресу <a href="http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt">http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt</a>.</p>

<h3 id="crypto.createHash">crypto.createHash(algorithm)</h3>

<p>Создает и возвращает объект <code>hash</code>, который может быть использован
для создания криптографических хэшей по заданному алгоритму.</p>

<p>Возможные значения для <code>algorithm</code> зависят от доступных алгоритмах в той версии OpenSSL,
которая у вас установлена. Например, это может быть <code>'sha1'</code>, <code>'md5'</code> и т.д.
В последней версии OpenSSL список поддерживаемых алгоритмов можно было узнать
с помощью команды <code>openssl list-message-digest-algorithms</code>.</p>

<p>Пример: программа, рассчитывающая sha1 хеш-сумму содержимого файла.</p>

<pre><code>var filename = process.argv[2];
var crypto = require('crypto');
var fs = require('fs');

var shasum = crypto.createHash('sha1');

var s = fs.ReadStream(filename);
s.on('data', function(d) {
  shasum.update(d);
});

s.on('end', function() {
  var d = shasum.digest('hex');
  console.log(d + '  ' + filename);
});</code></pre>

<h3 id="hash.update">hash.update(data)</h3>

<p>Обновляет содержимое на <code>data</code>. Этот метод может быть вызван несколько раз.</p>

<h3 id="hash.digest">hash.digest(encoding='binary')</h3>

<p>Вычисляет хеш от всех поступивших данных.
Параметр <code>encoding</code> может равняться <code>'hex'</code>, <code>'binary'</code> или <code>'base64'</code>.</p>

<p>Замечание: объект <code>hash</code> нельзя использовать после того, как будет вызван метод <code>digest()</code>.</p>

<h3 id="crypto.createHmac">crypto.createHmac(algorithm, key)</h3>

<p>Создает и возвращает объект <code>hmac</code>, который может быть использован
для создания хеш-кода идентификации сообщений (HMAC) по заданному алгоритму и ключу.</p>

<p>Возможные значения для <code>algorithm</code> зависят от доступных алгоритмах в OpenSSL,
см. описание для <code>crypto.createHash()</code> выше. <code>key</code> определяет используемый ключ.</p>

<h3 id="hmac.update">hmac.update(data)</h3>

<p>Обновляет содержимое на <code>data</code>. Этот метод может быть вызван несколько раз.</p>

<h3 id="hmac.digest">hmac.digest(encoding='binary')</h3>

<p>Вычисляет хеш от всех поступивших данных.
Параметр encoding может равняться <code>'hex'</code>, <code>'binary'</code> или <code>'base64'</code>.</p>

<p>Замечание: объект <code>hmac</code> нельзя использовать после того, как будет вызван метод <code>digest()</code>.</p>

<h3 id="crypto.createCipher">crypto.createCipher(algorithm, password)</h3>

<p>Создает и возвращает объект <code>cipher</code>, который может быть использован
для шифрования по заданному алгоритму и паролю.</p>

<p>Возможные значения для <code>algorithm</code> зависят от доступных алгоритмах в той версии OpenSSL,
которая у вас установлена. Например, это может быть <code>'aes192'</code>, <code>'blowfish'</code> и т.д.
В последней версии OpenSSL список поддерживаемых алгоритмов можно было узнать
с помощью команды <code>openssl list-cipher-algorithms</code>.</p>

<p><code>password</code> используется для получения информации о ключе и IV, и должен быть строкой,
закодированной с использованием кодировки <code>'binary'</code> (см. <a href="buffers.html)">Buffers</a>.</p>

<h3 id="crypto.createCipheriv">crypto.createCipheriv(algorithm, key, iv)</h3>

<p>Создает и возвращает объект <code>cipher</code>, который может быть использован
для шифрования по заданному алгоритму, ключу и IV.</p>

<p><code>algorithm</code> может иметь такие же значения, что и для метода <code>createCipher()</code>. <code>key</code> является ключём,
используемым в этом алгоритме. <code>iv</code> задаёт вектор инициализации. <code>key</code> и <code>iv</code> должны быть строками,
закодированными с использованием кодировки <code>'binary'</code> (см. <a href="buffers.html)">Buffers</a>.</p>

<h3 id="cipher.update">cipher.update(data, input_encoding='binary', output_encoding='binary')</h3>

<p>Обновляет содержимое на <code>data</code>, кодировку которых задаёт аргумент <code>input_encoding</code>
(может равняться <code>'utf8'</code>, <code>'ascii'</code> или <code>'binary'</code>). Аргумент <code>output_encoding</code>
определяет выходной формат и может равняться <code>'binary'</code>, <code>'base64'</code> или <code>'hex'</code>.</p>

<p>Возвращает зашифрованного содержимого и может быть названо много раз с новыми данными.</p>

<h3 id="cipher.final">cipher.final(output_encoding='binary')</h3>

<p>Возвращает все оставшиеся зашифрованного содержимого в кодировке <code>output_encoding</code>,
которая может равняться <code>'binary'</code>, <code>'ascii'</code> или <code>'utf8'</code>.</p>

<p>Замечание: объект <code>cipher</code> не может быть использован после вызова метода <code>final()</code>.</p>

<h3 id="crypto.createDecipher">crypto.createDecipher(algorithm, password)</h3>

<p>Создает и возвращает объект <code>decipher</code>, который может быть использован
для дешифрования по заданному алгоритму и паролю.
Это метод-близнец для <a href="#crypto.createCipher">createCipher()</a>`, описанному выше.</p>

<h3 id="crypto.createDecipheriv">crypto.createDecipheriv(algorithm, key, iv)</h3>

<p>Создает и возвращает объект <code>decipher</code>, который может быть использован
для дешифрования по заданному алгоритму, ключу и IV.
Это метод-близнец для <a href="#crypto.createCipheriv">createCipheriv()</a>, описанному выше.</p>

<h3 id="decipher.update">decipher.update(data, input_encoding='binary', output_encoding='binary')</h3>

<p>Обновляет содержимое на <code>data</code>, формат которых задаёт аргумент <code>input_encoding</code>
(может равняться <code>'binary'</code>, <code>'base64'</code> или <code>'hex'</code>). Аргумент <code>output_encoding</code>
определяет выходную кодировку и может равняться <code>'utf8'</code>, <code>'ascii'</code> или <code>'binary'</code>.</p>

<h3 id="decipher.final">decipher.final(output_encoding='binary')</h3>

<p>Возвращает все оставшиеся разшифрованного содержимого в виде простого текста.
Значение аргументо output_encoding объяснено выше.</p>

<p>Замечание: объект <code>decipher</code> не может быть использован после вызова метода <code>final()</code>.</p>

<h3 id="crypto.createSign">crypto.createSign(algorithm)</h3>

<p>Создает и возвращает объект <code>signer</code>, который может быть использован
для создания электронной подписи по заданному алгоритму.</p>

<h3 id="signer.update">signer.update(data)</h3>

<p>Обновляет содержимое на <code>data</code>. Этот метод может быть вызван несколько раз.</p>

<h3 id="signer.sign">signer.sign(private_key, output_format='binary')</h3>

<p>Вычисляет подпись для всех данных. <code>private_key</code> задаёт закрытый ключ в формате PEM.</p>

<p>Возвращает подпись в формате <code>output_format</code>, который может равняться <code>'binary'</code>, <code>'hex'</code> или <code>'base64'</code>.</p>

<p>Замечание: объект <code>signer</code> не может быть использован после вызова метода <code>sign()</code>.</p>

<h3 id="crypto.createVerify">crypto.createVerify(algorithm)</h3>

<p>Создает и возвращает объект <code>verifier</code>, который может быть использован
для проверки электронной подписи. Это объект-близнец для объекта <code>signer</code>.</p>

<h3 id="verifier.update">verifier.update(data)</h3>

<p>Обновляет содержимое на <code>data</code>. Этот метод может быть вызван несколько раз.</p>

<h3 id="verifier.verify">verifier.verify(cert, signature, signature_format='binary')</h3>

<p>Проверяет данные с помощью сертификата <code>cert</code> в формате PEM и подписи
<code>signature</code> формата <code>signature_format</code> (может равняться <code>'binary'</code>, <code>'hex'</code> или <code>'base64'</code>.</p>

<p>Возвращает <code>true</code> или <code>false</code> в зависимости от действительности подписи и публичного ключа.</p>

<p>Замечание: объект <code>verifier</code> не может быть использован после вызова метода <code>verify()</code>.</p>
  </div>
  <script type="text/javascript" src="assets/sh_main.js"></script>
  <script type="text/javascript" src="assets/sh_javascript.min.js"></script>
  <script type="text/javascript">highlight(undefined, undefined, 'pre');</script>
  <!-- Yandex.Metrika --> 
  <script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript"></script> 
  <script type="text/javascript"> 
  try { var yaCounter612423 = new Ya.Metrika(612423); } catch(e){}
  </script> 
  <noscript><div style="position: absolute;"><img src="//mc.yandex.ru/watch/612423" alt="" /></div></noscript> 
  <!-- /Yandex.Metrika -->   
</body>
</html>
