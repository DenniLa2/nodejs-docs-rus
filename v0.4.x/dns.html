<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>dns - Node.js &mdash; Документация</title>
  <link rel="stylesheet" href="assets/style.css" type="text/css" media="all" />
  <link rel="stylesheet" href="assets/sh.css" type="text/css" media="all" />
</head>
<body>
  <a href="http://github.com/kurokikaze/nodejs-docs-rus"><img style="position: absolute; top: 0; left: 0; border: 0;" src="assets/forkme_left_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  <div id="container">
    <header>
      <h1>Node.js &mdash; Документация</h1>
      <div id="gtoc">
        <p><a href="index.html">Содержание</a> | <a href="all.html">Просмотреть на одной странице</a></p>
      </div>
      <hr />
    </header>
    <div id="toc"><h2>Содержание</h2><ul><li><a href="#dNS">DNS</a><ul><li><a href="#dns.lookup">dns.lookup(domain, family=null, callback)</a></li><li><a href="#dns.resolve">dns.resolve(domain, rrtype='A', callback)</a></li><li><a href="#dns.resolve4">dns.resolve4(domain, callback)</a></li><li><a href="#dns.resolve6">dns.resolve6(domain, callback)</a></li><li><a href="#dns.resolveMx">dns.resolveMx(domain, callback)</a></li><li><a href="#dns.resolveTxt">dns.resolveTxt(domain, callback)</a></li><li><a href="#dns.resolveSrv">dns.resolveSrv(domain, callback)</a></li><li><a href="#dns.reverse">dns.reverse(ip, callback)</a></li></ul></li></ul><hr /></div>
<h2 id="dNS">DNS</h2>

<p>Используйте <code>require('dns')</code> чтобы получить доступ к модулю.</p>

<p>Пример, преобразующий в IP-адрес хост <code>'www.google.com'</code>
и преобразовывающий обратно полученные адреса.</p>

<pre><code>var dns = require('dns');

dns.resolve4('www.google.com', function (err, addresses) {
  if (err) throw err;

  console.log('addresses: ' + JSON.stringify(addresses));

  addresses.forEach(function (a) {
    dns.reverse(a, function (err, domains) {
      if (err) {
        console.log('reverse for ' + a + ' failed: ' +
          err.message);
      } else {
        console.log('reverse for ' + a + ': ' +
          JSON.stringify(domains));
      }
    });
  });
});</code></pre>

<h3 id="dns.lookup">dns.lookup(domain, family=null, callback)</h3>

<p>Resolves a domain (e.g. <code>'google.com'</code>) into the first found A (IPv4) or
AAAA (IPv6) record.</p>

<p>The callback has arguments <code>(err, address, family)</code>.  The <code>address</code> argument
is a string representation of a IP v4 or v6 address. The <code>family</code> argument
is either the integer 4 or 6 and denotes the family of <code>address</code> (not
neccessarily the value initially passed to <code>lookup</code>).</p>

<h3 id="dns.resolve">dns.resolve(domain, rrtype='A', callback)</h3>

<p>Разрешает домен (например <code>'google.com'</code>) в массив записей типа, указанного в <code>rrtype</code>.
Допустимые значения rrtypes: <code>'A'</code> (адреса IPV4), <code>'AAAA'</code> (адреса IPV6),
<code>'MX'</code> (записи mail exchange), <code>'TXT'</code> (текстовые записи), <code>'SRV'</code> (записи SRV)
и <code>'PTR'</code> (используются для запросов домена по IP).</p>

<p>Обработчик принимает аргументы <code>(err, addresses)</code>. Тип каждого элемента <code>addresses</code>
определяется типом записи и описан в документации по соответствующим методам запроса ниже.</p>

<p>При ошибке <code>err</code> будет экземпляром объекта <code>Error</code>, где <code>err.errno</code> — один из кодов ошибки,
перечисленных ниже, а <code>err.message</code> — строка, содержащая описание ошибки на английском.</p>

<h3 id="dns.resolve4">dns.resolve4(domain, callback)</h3>

<p>То же что <code>dns.resolve()</code>, но только для IPv4 адресов (записи типа A).
<code>addresses</code> это массив IPv4 адресов (например<br></br><code>['74.125.79.104', '74.125.79.105', '74.125.79.106']</code>).</p>

<h3 id="dns.resolve6">dns.resolve6(domain, callback)</h3>

<p>То же что <code>dns.resolve4()</code> но только для IPv6 адресов (записи типа AAAA).</p>

<h3 id="dns.resolveMx">dns.resolveMx(domain, callback)</h3>

<p>То же что <code>dns.resolve()</code>, но только для MX-записей.</p>

<p><code>addresses</code> это массив MX записей, каждая с атрибутами <code>priority</code> и <code>exchange</code>
(например <code>[{'priority': 10, 'exchange': 'mx.example.com'},...]</code>).</p>

<h3 id="dns.resolveTxt">dns.resolveTxt(domain, callback)</h3>

<p>То же что <code>dns.resolve()</code>, но только для текстовых записей (тип записи TXT).
<code>addresses</code> это массив текстовых записей, доступных для домена <code>domain</code>
(например <code>['v=spf1 ip4:0.0.0.0 ~all']</code>).</p>

<h3 id="dns.resolveSrv">dns.resolveSrv(domain, callback)</h3>

<p>То же, что <code>dns.resolve()</code>, но только для service records (записей SRV).
<code>addresses</code> это массив SRV записей, доступных для домена <code>domain</code>.
Свойства SRV записей: <code>priority</code>, <code>weight</code>, <code>port</code>, и <code>name</code>
(например, <code>[{'priority': 10, {'weight': 5, 'port': 21223, 'name': 'service.example.com'}, ...]</code>).</p>

<h3 id="dns.reverse">dns.reverse(ip, callback)</h3>

<p>Обратно разрешает IP-адрес в массив доменных имён.</p>

<p>Аргументы обработчика: <code>(err, domains)</code>.</p>

<p>Если произошла ошибка, err будет ненулевым экземпляром объекта <code>Error</code>.</p>

<p>Каждый запрос к DNS может вернуть код ошибки.</p>

<ul><li><code>dns.TEMPFAIL</code>: таймаут, SERVFAIL или что-то подобное.</li><li><code>dns.PROTOCOL</code>: получен повреждённый ответ.</li><li><code>dns.NXDOMAIN</code>: домен не существует.</li><li><code>dns.NODATA</code>: домен существует, но нет данных требуемого типа.</li><li><code>dns.NOMEM</code>: при обработке закончилась память.</li><li><code>dns.BADQUERY</code>: запрос неверно сформирован.</li></ul>
  </div>
  <script type="text/javascript" src="assets/sh_main.js"></script>
  <script type="text/javascript" src="assets/sh_javascript.min.js"></script>
  <script type="text/javascript">highlight(undefined, undefined, 'pre');</script>
  <!-- Yandex.Metrika --> 
  <script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript"></script> 
  <script type="text/javascript"> 
  try { var yaCounter612423 = new Ya.Metrika(612423); } catch(e){}
  </script> 
  <noscript><div style="position: absolute;"><img src="//mc.yandex.ru/watch/612423" alt="" /></div></noscript> 
  <!-- /Yandex.Metrika -->   
</body>
</html>
